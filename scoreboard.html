<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KINGS - Scoreboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&display=swap" rel="stylesheet">
  <style>
    body {
      background: #121212;
      color: #f5f5f5;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }
    h1, h2 {
      font-family: 'Uncial Antiqua', cursive;
      color: crimson;
      text-align: center;
    }
    .scoreboard, .combo-box, .log-box {
      border: 2px solid crimson;
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      max-width: 500px;
      background: #1a1a1a;
    }
    .btn {
      background: crimson;
      border: none;
      color: white;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn:hover {
      background: darkred;
    }
    input[type="number"] {
      width: 80px;
      font-size: 1.5rem;
      text-align: center;
    }
    select {
      padding: 5px;
      margin: 5px;
    }
    #roundLog {
      max-height: 200px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    .shake {
      animation: shake 0.5s ease;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-2px); }
      100% { transform: translateX(0); }
    }
    .red-alert {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>KINGS Scoreboard</h1>

  <div class="scoreboard">
    <h2>Game Timer: <span id="gameTimer">10:00</span></h2>
    <button class="btn" onclick="startTimer()">Start</button>
    <button class="btn" onclick="resetTimer()">Reset</button>

    <h2>Player 1 HP</h2>
    <input type="number" id="hp1" value="200" />
    <div>
      <button class="btn" onclick="changeHP('hp1', -10)">-10</button>
      <button class="btn" onclick="changeHP('hp1', 10)">+10</button>
    </div>

    <h2>Player 2 HP</h2>
    <input type="number" id="hp2" value="200" />
    <div>
      <button class="btn" onclick="changeHP('hp2', -10)">-10</button>
      <button class="btn" onclick="changeHP('hp2', 10)">+10</button>
    </div>

    <button class="btn" onclick="resetHP()">Reset HP</button>
  </div>

  <div class="combo-box">
    <h2>Combo Calculator</h2>
    <div>
      <strong>Player 1 Card:</strong>
      <select id="baseNum1">
        <option value="2">2</option><option value="3">3</option><option value="4">4</option>
        <option value="5">5</option><option value="6">6</option><option value="7">7</option>
        <option value="8">8</option><option value="9">9</option><option value="10">10</option>
        <option value="11">A</option>
      </select>
      <select id="baseSuit1">
        <option value="heart">♥️</option>
        <option value="diamond">♦️</option>
        <option value="club">♣️</option>
        <option value="spade">♠️</option>
      </select>
    </div>
    <div>
      <strong>Player 1 Multiplier:</strong>
      <select id="multNum1">
        <option value="2">2</option><option value="3">3</option><option value="4">4</option>
        <option value="5">5</option><option value="6">6</option><option value="7">7</option>
        <option value="8">8</option><option value="9">9</option><option value="10">10</option>
        <option value="11">A</option>
      </select>
      <select id="multSuit1">
        <option value="heart">♥️</option>
        <option value="diamond">♦️</option>
        <option value="club">♣️</option>
        <option value="spade">♠️</option>
      </select>
    </div>

    <div>
      <strong>Player 2 Card:</strong>
      <select id="baseNum2">
        <option value="2">2</option><option value="3">3</option><option value="4">4</option>
        <option value="5">5</option><option value="6">6</option><option value="7">7</option>
        <option value="8">8</option><option value="9">9</option><option value="10">10</option>
        <option value="11">A</option>
      </select>
      <select id="baseSuit2">
        <option value="heart">♥️</option>
        <option value="diamond">♦️</option>
        <option value="club">♣️</option>
        <option value="spade">♠️</option>
      </select>
    </div>
    <div>
      <strong>Player 2 Multiplier:</strong>
      <select id="multNum2">
        <option value="2">2</option><option value="3">3</option><option value="4">4</option>
        <option value="5">5</option><option value="6">6</option><option value="7">7</option>
        <option value="8">8</option><option value="9">9</option><option value="10">10</option>
        <option value="11">A</option>
      </select>
      <select id="multSuit2">
        <option value="heart">♥️</option>
        <option value="diamond">♦️</option>
        <option value="club">♣️</option>
        <option value="spade">♠️</option>
      </select>
    </div>

    <button class="btn" onclick="calculateCombo()">Calculate & Apply</button>
    <p id="comboResult"></p>
  </div>

  <div class="log-box">
    <h2>Round Log</h2>
    <div id="roundLog"></div>
  </div>

  <audio id="btnSound" preload="auto" src="click.mp3"></audio>
  <audio id="lighthit" src="lighthit.mp3"></audio>
  <audio id="heavyhit" src="heavyhit.mp3"></audio>
  <audio id="revive" src="revive.mp3"></audio>

  <script>
    let timer;
    let timeRemaining = 600;
    let roundCount = 0;

    function updateTimerDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      const timerDisplay = document.getElementById('gameTimer');
      timerDisplay.textContent = display;
      timerDisplay.classList.toggle('red-alert', timeRemaining <= 60);
    }

    function startTimer() {
      clearInterval(timer);
      timer = setInterval(() => {
        if (timeRemaining > 0) {
          timeRemaining--;
          updateTimerDisplay();
        } else {
          clearInterval(timer);
        }
      }, 1000);
    }

    function resetTimer() {
      clearInterval(timer);
      timeRemaining = 600;
      updateTimerDisplay();
    }

    function changeHP(id, delta) {
      const input = document.getElementById(id);
      let value = parseInt(input.value);
      value = Math.max(0, value + delta);
      input.value = value;
    }

    function resetHP() {
      document.getElementById('hp1').value = 200;
      document.getElementById('hp2').value = 200;
      document.getElementById('revive').play();
    }

    function sameColor(suit1, suit2) {
      const red = ['heart', 'diamond'];
      return red.includes(suit1) === red.includes(suit2);
    }

    function calculateCombo() {
      const base1 = parseInt(document.getElementById("baseNum1").value);
      const mult1 = parseInt(document.getElementById("multNum1").value);
      const suit1 = document.getElementById("baseSuit1").value;
      const msuit1 = document.getElementById("multSuit1").value;

      const base2 = parseInt(document.getElementById("baseNum2").value);
      const mult2 = parseInt(document.getElementById("multNum2").value);
      const suit2 = document.getElementById("baseSuit2").value;
      const msuit2 = document.getElementById("multSuit2").value;

      let m1 = 1;
      if (sameColor(suit1, msuit1)) m1 *= 2;
      if (suit1 === msuit1) m1 += 3;
      if (base1 === mult1 && suit1 === msuit1) m1 = base1 * mult1 * 5;
      else base1 *= m1;

      let m2 = 1;
      if (sameColor(suit2, msuit2)) m2 *= 2;
      if (suit2 === msuit2) m2 += 3;
      if (base2 === mult2 && suit2 === msuit2) m2 = base2 * mult2 * 5;
      else base2 *= m2;

      let damage = Math.abs(base1 - base2);
      const target = base1 > base2 ? "Player 2" : base2 > base1 ? "Player 1" : null;

      if (target === "Player 1") {
        const hp1 = document.getElementById("hp1");
        hp1.value = Math.max(0, parseInt(hp1.value) - damage);
        (damage > 50 ? heavyhit : lighthit).play();
      } else if (target === "Player 2") {
        const hp2 = document.getElementById("hp2");
        hp2.value = Math.max(0, parseInt(hp2.value) - damage);
        (damage > 50 ? heavyhit : lighthit).play();
      }

      const log = document.getElementById("roundLog");
      roundCount++;
      log.innerHTML += `<p><strong>Round ${roundCount} [${document.getElementById('gameTimer').textContent}]</strong>: 
      P1 played ${base1}, P2 played ${base2}. 
      ${target ? `${target} took ${damage} damage.` : "Tie."}</p>`;

      document.getElementById("comboResult").innerText = target
        ? `${target} took ${damage} damage!`
        : "It was a tie!";
    }

    window.onload = updateTimerDisplay;
  </script>
</body>
</html>
